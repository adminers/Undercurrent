<html><head><meta charset="utf-8"/><title>Coup Ahoo</title><style>body{margin:0;overflow:hidden;background:#000}</style></head><body><script>(()=>{"use strict";var t={d:(i,n)=>{for(var s in n)t.t(n,s)&&!t.t(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:n[s]})},t:(t,i)=>Object.prototype.hasOwnProperty.call(t,i)};t.d({},{i:()=>wt,h:()=>yt});var i={o:[{u:[1,192,128,0,1,191,116,9,0,0,6,22,34,0,0,0,3,69,3,1,1,23,167,0,32,77,6,25,6],v:[1,1,1,1,1,2,,,1,2],c:[{n:[144,,147,,151,,141,,141,,,,147,,146,,,,149,,152,,143,,143,,149,,151,,143],f:[]},{n:[144,,147,,151,,141,,141,,147,,151,,143,,,,149,,,,141,,,,143,,,,144],f:[]}]},{u:[1,192,128,0,1,191,116,9,0,0,6,22,34,0,0,0,2,69,3,1,1,23,167,0,32,77,6,25,6],v:[,,1,1,,,1,1,1,2,1,2],c:[{n:[156,,,,,,153,,153,,,,151,,158,,,,,,,,155,,155,,,,,,155],f:[]},{n:[156,,,,,,153,,153,,,,151,,155,,,,146,,,,153,,,,155,,,,156],f:[]}]},{u:[1,192,128,0,2,210,128,20,0,0,5,4,37,0,0,0,0,0,0,0,2,255,0,0,32,47,3,146,2],v:[,,,,1,2,1,2,1,2,1,2],c:[{n:[108,,,,,,113,,,,,,115,,,,,,,,,,103,,,,,,108],f:[]},{n:[,,,,,,113,,,,,,115,,,,,,,,,,103],f:[]}]},{u:[0,255,116,79,0,255,116,0,83,0,4,6,69,52,0,0,0,0,0,0,2,14,0,0,32,0,0,0,0],v:[,,1,2,1,2,1,2,1,2],c:[{n:[135,,,,,,,,,,135,,,,,,135,,,,,,,,,,135],f:[]},{n:[135,,,,,,,,,,135,,,,,,135],f:[]}]},{u:[0,160,128,64,0,160,128,0,64,210,4,7,52,85,0,0,0,60,4,1,2,255,0,0,32,61,5,32,6],v:[,,1,2,1,2,1,2,1,2,1,2],c:[{n:[,,,,135,,,,,,,,135,,,,,,,,135,,,,,,,,135,,135],f:[]},{n:[,,,,135,,,,,,,,135,,,,,,,,135,,,,,,,,,,140],f:[]}]},{u:[0,0,140,0,0,0,140,0,0,81,4,10,47,55,0,0,0,187,5,0,1,239,135,0,32,108,5,16,4],v:[1,2,1,2,1,2,1,2,1,2,1,2],c:[{n:[135,,,,135,,,,135,,,,,,,,135,,135,,135,,135,,135,,,,135,,135],f:[]},{n:[135,,,,135,,,,135,,,,,,,,135,,135,,135,,135,,135,,,,,,135],f:[]}]},{u:[3,255,128,0,0,255,140,0,0,187,2,2,47,61,0,0,0,96,3,1,3,94,79,0,32,84,2,12,4],v:[,,1,2,1,2,1,2,1,2],c:[{n:[,,,,,,,,,111,,,,,,,,,,,,,,,,111],f:[]},{n:[,,,,,,,,,111,,,,,,,,,,,,,,,,,,111,,111],f:[]}]},{u:[2,40,140,64,0,0,140,0,0,255,5,0,67,104,0,0,0,0,0,0,3,161,192,0,32,0,0,52,1],v:[,1,,,,1,,,,1,,1],c:[{n:[,,,,,,,,,,,,,,,,,,,,,,,,,123,123,,,123,123],f:[]}]}],l:5513,m:32,M:11,T:8},n=function(){var t,i,n,s,h,r=function(t){return Math.sin(6.283184*t)},o=function(t){return.003959503758*Math.pow(2,(t-128)/12)},u=function(t,i,n){var s,h,r,u,f,c,a=e[t.u[0]],v=t.u[1],l=t.u[3]/32,d=e[t.u[4]],y=t.u[5],w=t.u[8]/32,m=t.u[9],M=t.u[10]*t.u[10]*4,b=t.u[11]*t.u[11]*4,T=t.u[12]*t.u[12]*4,p=1/T,O=-t.u[13]/16,_=t.u[14],x=(Math.pow(2,2-t.u[15]),new Int32Array(M+b+T)),j=0,g=0;for(s=0,h=0;s<M+b+T;s++,h++)h>=0&&(f=o(i+(15&_)+t.u[2]-128),c=o(i+(15&_)+t.u[6]-128)*(1+8e-4*t.u[7])),r=1,s<M?r=s/M:s>=M+b&&(r=(1-(r=(s-M-b)*p))*Math.pow(3,O*r)),u=a(j+=f*Math.pow(r,l))*v,u+=d(g+=c*Math.pow(r,w))*y,m&&(u+=(2*Math.random()-1)*m),x[s]=80*u*r|0;return x},e=[r,function(t){return t%1<.5?1:-1},function(t){return t%1*2-1},function(t){var i=t%1*4;return i<2?i-1:3-i}];this.init=function(r){t=r,i=r.M,n=0,s=r.l*r.m*(i+1)*2,h=new Int32Array(s)},this.p=function(){var o,f,c,a,v,l,d,y,w,m,M,b,T,p,O=new Int32Array(s),_=t.o[n],x=t.l,j=t.m,g=0,A=0,E=!1,S=[];for(c=0;c<=i;++c)for(d=_.v[c],a=0;a<j;++a){var C=e[_.u[16]],k=_.u[17]/512,L=Math.pow(2,_.u[18]-9)/x,I=_.u[19],R=_.u[20],H=43.23529*_.u[21]*3.141592/44100,D=1-_.u[22]/255,N=1e-5*_.u[23],P=_.u[24]/32,U=_.u[25]/512,W=6.283184*Math.pow(2,_.u[26]-9)/x,Y=_.u[27]/255,q=_.u[28]*x&-2;for(M=(c*j+a)*x,v=0;v<4;++v)if(l=d?_.c[d-1].n[a+v*j]:0){S[l]||(S[l]=u(_,l,x));var B=S[l];for(f=0,o=2*M;f<B.length;f++,o+=2)O[o]+=B[f]}for(f=0;f<x;f++)(m=O[y=2*(M+f)])||E?(b=H,I&&(b*=C(L*y)*k+.5),A+=(b=1.5*Math.sin(b))*(T=D*(m-A)-(g+=b*A)),m=3==R?A:1==R?T:g,N&&(m=(m*=N)<1?m>-1?r(.25*m):-1:1,m/=N),E=(m*=P)*m>1e-5,p=m*(1-(w=Math.sin(W*y)*U+.5)),m*=w):p=0,y>=q&&(p+=O[y-q+1]*Y,m+=O[y-q]*Y),O[y]=0|p,O[y+1]=0|m,h[y]+=0|p,h[y+1]+=0|m}return++n/t.T},this.O=function(t){for(var i=t.createBuffer(2,s/2,44100),n=0;n<2;n++)for(var r=i.getChannelData(n),o=n;o<s;o+=2)r[o>>1]=h[o]/65536;return i},this._=function(){var t=44+2*s-8,i=t-36,n=new Uint8Array(44+2*s);n.set([82,73,70,70,255&t,t>>8&255,t>>16&255,t>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,255&i,i>>8&255,i>>16&255,i>>24&255]);for(var r=0,o=44;r<s;++r){var u=h[r];u=u<-32767?-32767:u>32767?32767:u,n[o++]=255&u,n[o++]=u>>8&255}return n},this.getData=function(t,i){for(var n=2*Math.floor(44100*t),s=new Array(i),r=0;r<2*i;r+=1){var o=n+r;s[r]=t>0&&o<h.length?h[o]/32768:0}return s}};function s(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return r.play.apply(r,t)}var h,r={volume:.3,sampleRate:44100,x:new AudioContext,play:function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return this.j(this.g.apply(this,t))},j:function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=this.x.createBuffer(t.length,t[0].length,this.sampleRate),s=this.x.createBufferSource();return t.map((function(t,i){return n.getChannelData(i).set(t)})),s.buffer=n,s.connect(this.x.destination),s.start(),s},g:function(t,i,n,s,h,r,o,u,e,f,c,a,v,l,d,y,w,m,M,b){void 0===t&&(t=1),void 0===i&&(i=.05),void 0===n&&(n=220),void 0===s&&(s=0),void 0===h&&(h=0),void 0===r&&(r=.1),void 0===o&&(o=0),void 0===u&&(u=1),void 0===e&&(e=0),void 0===f&&(f=0),void 0===c&&(c=0),void 0===a&&(a=0),void 0===v&&(v=0),void 0===l&&(l=0),void 0===d&&(d=0),void 0===y&&(y=0),void 0===w&&(w=0),void 0===m&&(m=1),void 0===M&&(M=0),void 0===b&&(b=0);var T,p,O=2*Math.PI,_=this.sampleRate,x=e*=500*O/_/_,j=n*=(1+2*i*Math.random()-i)*O/_,g=[],A=0,E=0,S=0,C=1,k=0,L=0,I=0;for(s=s*_+9,M*=_,h*=_,r*=_,w*=_,f*=500*O/Math.pow(_,3),d*=O/_,c*=O/_,a*=_,v=v*_|0,p=s+M+h+r+w|0;S<p;g[S++]=I)++L%(100*y|0)||(I=o?o>1?o>2?o>3?Math.sin(Math.pow(A%O,3)):Math.max(Math.min(Math.tan(A),1),-1):1-(2*A/O%2+2)%2:1-4*Math.abs(Math.round(A/O)-A/O):Math.sin(A),I=(v?1-b+b*Math.sin(O*S/v):1)*(I>0?1:-1)*Math.pow(Math.abs(I),u)*t*this.volume*(S<s?S/s:S<s+M?1-(S-s)/M*(1-m):S<s+M+h?m:S<p-w?(p-S-w)/r*m:0),I=w?I/2+(w>S?0:(S<p-w?1:(p-S)/w)*g[S-w|0]/2):I),A+=(T=(n+=e+=f)*Math.cos(d*E++))-T*l*(1-1e9*(Math.sin(S)+1)%2),C&&++C>a&&(n+=c,j+=c,C=0),!v||++k%v||(n=j,e=x,C||(C=1));return g}},o=function(){function t(t){this.A=!1,this.S=document.createElement("audio"),t&&this.C()}return t.prototype.k=function(){var t=this;if(!this.A){this.A=!0;var s=new n;s.init(i),s.p(),this.loaded=!1;var h=setInterval((function(){if(!t.loaded&&(t.loaded=s.p()>=1,t.loaded)){var i=s._();t.S.src=URL.createObjectURL(new Blob([i],{type:"audio/wav"})),t.S.loop=!0,t.S.volume=.7,t.S.L=!1,clearInterval(h)}}),5)}},t.prototype.I=function(t){this.S.volume=t},t.prototype.R=function(){return this.S.playbackRate},t.prototype.H=function(t){t<.1?this.S.volume=0:this.S.playbackRate=t},t.prototype.D=function(){return this.muted},t.prototype.N=function(t){this.muted=t,this.muted?this.S.pause():this.S.play()},t.prototype.C=function(){this.N(!this.muted)},t.prototype.play=function(){var t=this,i=setInterval((function(){t.loaded&&(t.muted||t.S.play(),clearInterval(i))}),5)},t.prototype.playEffect=function(t){this.muted||s.apply(void 0,t.map((function(t,i){return 0===i?.6*(null!=t?t:1):t})))},t.prototype.P=function(){this.playEffect([2.5,,321,.01,,.02,,.7,-62,-30,116,.15,,.6,35,,.04,.51,.03,,99])},t.prototype.U=function(){},t.prototype.W=function(){this.P(),this.playEffect([1.5,,419,.02,.03,.01,3,3.5,-49,5,283,.49,.09,,,,.04,.69,.02,.12,-1280])},t.prototype.Y=function(){this.playEffect([2,,419,.02,.03,.18,2,1.5,14,8,,,,,,.4,.17,.93,.19,,305])},t.prototype.q=function(){this.playEffect([1.5,,341,.02,.14,,3,2.8,-14,15,,,.07,,3.4,.4,.04,.64,.18,.2,99]),this.playEffect([2.5,,468,.01,.08,.11,4,2.8,,,,,.1,1.3,,.3,.04,.46,.08,.3])},t.prototype.B=function(){this.playEffect([.6,,528,.01,.05,.03,2,4.4,-47,22,77,.29,,,,,,.7,.03,.21,422]),this.playEffect([3.2,,291,,,.04,1,3.9,7,,26,.04,.1,.4,,,.16,.73,.01,.45,-1167])},t.prototype.F=function(){this.playEffect([1.4,,586,,.04,.01,4,.6,32,,-1,.03,,.4,,,.28,.72,.01,.31,-1408])},t.prototype.K=function(t){this.playEffect([t,,50,.09,.26,.62,4,2.7,6,,,,.06,1.2,,.1,,.46,.27,.03,1598])},t.prototype.G=function(){this.playEffect([.7,,312,.01,.01,.06,,2.6,,58,,,,,,.1,,.57,.09])},t.prototype.V=function(){this.playEffect([1,,252,.02,.02,.19,,1.7,,-50,,,,,,.1,.03,.91,.04])},t.prototype.J=function(){this.playEffect([2.2,,229,.03,.11,.5,,2.6,,,-186,.06,.03,,,,.12,.5,.17])},t.prototype.X=function(){var t=this;this.playEffect([.8,,35,.04,.08,.6,4,3.4,5,,,,,.3,,.1,,.37,.19,,1989]),setTimeout((function(){return t.playEffect([.7,,468,.06,.11,,,3.2,-8,,-61,.07,.05,,,,,.91,.14])}),500)},t.prototype.Z=function(){this.playEffect([1.5,,525,.07,.12,.44,,1.2,,75,,,.05,.3,.9,,,,.26,.23,494])},t.prototype.warn=function(){this.Z(),this.playEffect([,,326,,.11,.45,1,.8,,-5,124,.07,.06,.2,33,,,.54,.14,,-1210])},t.prototype.$=function(){this.J(),this.playEffect([1.5,,444,.1,.13,.34,1,1.2,,,-128,.06,.02,,1,.1,,.56,.19])},t.prototype.tt=function(){this.playEffect([.5,,541,.03,.16,.35,1,1.5,3,1,,,.07,,.6,,,.89,.17]),this.playEffect([2.5,,93,.06,.01,.67,2,1.6,,3,,,,.5,,.6,.04,.32,.09])},t}(),u=function(t){return function(t,i,n){return Math.min(Math.max(t,i),n)}(t,0,1)},e=function(t,i,n){return t+(i>t?Math.min(i-t,n):Math.max(i-t,-n))},f={x:0,y:0},c=function(t,i,n){return{x:t.x+i,y:t.y+n}},a=function(t){return t*t},v=function(t){return t<.5?2*t*t:-2*t*t+4*t-1},l=function(){function t(t){this.it=t,this.time=0,this.type="none",this.nt=function(t){return(i=t)<4/11?121*i*i/16:i<8/11?9.075*i*i-9.9*i+3.4:i<.9?4356/361*i*i-35442/1805*i+16061/1805:10.8*i*i-20.52*i+10.72;var i}}return t.prototype.scale=function(t,i){this.type="scale";var n=this.it.scale;this.start={x:n.x,y:n.y},this.st(t,i)},t.prototype.move=function(t,i){this.type="move";var n=this.it.v;this.start={x:n.x,y:n.y},this.st(t,i)},t.prototype.ht=function(t){this.nt=t},t.prototype.st=function(t,i){this.target=t,this.duration=1e3*i,this.active=!0,this.startTime=-1},t.prototype.update=function(t){if(this.startTime<0||"none"==this.type)this.startTime=t;else if(this.active&&(this.time=u((t-this.startTime)/this.duration),this.start&&this.target)){var i,n,s,h,r=(i=this.start,n=this.target,s=this.time,void 0===(h=this.nt)&&(h=function(t){return t}),{x:i.x+h(s)*(n.x-i.x),y:i.y+h(s)*(n.y-i.y)});"move"==this.type&&(this.it.v={x:r.x,y:r.y}),"scale"==this.type&&(this.it.scale={x:r.x,y:r.y}),"rotate"==this.type&&(this.it.rotation=r.x),this.active=this.time<1}},t.rt=function(t,i){void 0===i&&(i=1e3);for(var n=function(n){setTimeout((function(){return t(n)}),n*i)},s=0;s<1;s+=.01)n(s)},t}(),d=function(){function t(t,i,n,s,h){this.ot=t,this.scale={x:1,y:1},this.d=0,this.rotation=0,this.ut=0,this.et=0,this.ft=0,this.ct=0,this.vt=.005,this.delta=0,this.v={x:i,y:n},this.s={x:s,y:h},this.lt=new l(this),this.ut=Math.random()}return t.prototype.update=function(t,i){this.delta=t-this.et,this.et=t,this.lt.update(t),this.ft=Math.sin(t*this.vt+this.ut),this.ct=Math.abs(this.ft)},t.prototype.dt=function(t){},t.prototype.yt=function(){return{x:this.v.x+.5*this.s.x,y:this.v.y+.5*this.s.y}},t.prototype.wt=function(t,i){void 0===i&&(i=0);var n=this.yt();return t.x>n.x-.5*this.s.x*this.scale.x-.5*i&&t.x<n.x+.5*this.s.x*this.scale.x+.5*i&&t.y>n.y-.5*this.s.y*this.scale.y-.5*i&&t.y<n.y+.5*this.s.y*this.scale.y+.5*i},t}(),y=(h=function(t,i){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},h(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}h(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),w=function(t){function i(i,n){void 0===n&&(n=0);var s=t.call(this,i,0,0,0,0)||this;return s.d=500,setTimeout((function(){return s.open()}),n),s}return y(i,t),i.prototype.open=function(t){void 0===t&&(t=function(){}),this.lt.scale({x:0,y:0},.5),setTimeout(t,500)},i.prototype.close=function(t){void 0===t&&(t=function(){}),this.lt.scale({x:1,y:1},.4),setTimeout(t,500)},i.prototype.dt=function(t){t.fillStyle="#000",t.fillRect(0,0,yt*this.scale.x,wt),t.fillRect(yt-yt*this.scale.x,0,yt*this.scale.x,wt)},i}(d),m=function(t,i){return void 0===t&&(t=0),void 0===i&&(i=1),t+Math.random()*(i-t)},M=function(t,i){return t+Math.floor(Math.random()*(i-t+1))},b=function(t){return t[Math.floor(Math.random()*t.length)]},T=function(){return Math.random()<.5?1:-1},p=function(){function t(){this.offset=f,this.pan=f,this.shift=0,this.Mt=0,this.bt=0}return t.prototype.Tt=function(t,i,n){var s=this;void 0===n&&(n=0),this.Mt=t,this.bt=n/360*Math.PI,clearTimeout(this.Ot),this.Ot=setTimeout((function(){return s.reset()}),1e3*i)},t.prototype.update=function(){this.offset={x:m(-this.Mt,this.Mt),y:m(-this.Mt,this.Mt)},this.rotation=m(-this.bt,this.bt)},t.prototype.reset=function(){this.Mt=0,this.bt=0},t}(),O=function(){function t(t){this.S=t,this.value=this.target=this.S.R(),this.disabled=["ipho","ipad","macin"].some((function(t){return navigator.userAgent.toLowerCase().includes(t)&&navigator.maxTouchPoints>0}))}return t.prototype.update=function(t){if(!this.disabled){var i=this.target-this.value;Math.abs(i)<.01||(this.value+=1e-4*Math.sign(i)*t*this.speed,this.S.H(this.value))}},t.prototype._t=function(t,i){void 0===i&&(i=1),this.speed=i,this.value=t},t.prototype.xt=function(t,i){void 0===i&&(i=1),this.speed=i,this.target=t},t}(),_=function(){var t=function(i,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},t(i,n)};return function(i,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),x=function(t){function i(i,n){var s=t.call(this,null,0,0,0,0)||this;return s.S=i,s.canvas=n,s.jt=new p,s.gt=[],s.At=new O(i),s.Et=new w(s,400),s}return _(i,t),i.prototype.click=function(t){var i;null===(i=this.St)||void 0===i||i.Ct().forEach((function(i){i.visible&&i.wt(t)&&i.kt()}))},i.prototype.Lt=function(t){this.gt=[t]},i.prototype.pressed=function(t){t.repeat||this.gt.forEach((function(i){return i(t)}))},i.prototype.update=function(i,n){var s;t.prototype.update.call(this,i,n),null===(s=this.St)||void 0===s||s.update(i,n),this.jt.update(),this.Et.update(i,n),this.At.update(this.delta),n.It=!1},i.prototype.dt=function(t){var i;t.fillStyle="#5d9acf",t.fillRect(0,0,800,600),t.save(),t.rotate(this.jt.rotation),t.scale(this.jt.zoom,this.jt.zoom),t.translate(this.jt.offset.x-this.jt.pan.x+this.jt.shift,this.jt.offset.y+this.jt.pan.y),null===(i=this.St)||void 0===i||i.dt(t),t.restore(),this.Et.dt(t)},i.prototype.Rt=function(t){var i=this;this.Et.close((function(){i.St=t,i.Et.open()}))},i}(d),j=function(){var t=function(i,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},t(i,n)};return function(i,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),g=function(t,i,n){if(n||2===arguments.length)for(var s,h=0,r=i.length;h<r;h++)!s&&h in i||(s||(s=Array.prototype.slice.call(i,0,h)),s[h]=i[h]);return t.concat(s||Array.prototype.slice.call(i))},A=function(t){function i(i,n,s,h){var r;void 0===n&&(n=0),void 0===s&&(s=0),void 0===h&&(h=[]);var o=t.call(this,i,n,s,0,0)||this;return o.children=[],(r=o.children).push.apply(r,h),o}return j(i,t),i.prototype.update=function(i,n){t.prototype.update.call(this,i,n),this.children.forEach((function(t){return t.update(i,n)})),this.children.some((function(t){return t.Ht}))&&(this.children=this.children.filter((function(t){return!t.Ht})))},i.prototype.dt=function(t){t.save(),g([],this.children,!0).sort((function(t,i){return t.d-i.d})).forEach((function(i){return i.dt(t)})),t.restore()},i.prototype.Dt=function(){return this.children},i.prototype.add=function(){for(var t,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];(t=this.children).push.apply(t,i)},i.prototype.Ct=function(){return[]},i}(d),E=["#e3e0bc","#c9c595","#edece1","#dbac86","#ebb7cc","#734e3b","#6e594f","#ede1e6"],S=["#a68b49","#7d572c","#633f15","#8c8465"],C=["#fff","#e92","#9d55d4","#a8edae","#6cd158","#d420b6","#333","#ff3","#f0ed92"],k=function(t,i,n,s,h){L(t,i,n,n,s,h)},L=function(t,i,n,s,h,r){t.beginPath(),t.fillStyle=h,t.ellipse(i.x,i.y,n,s,0,0,2*Math.PI),t.fill(),r&&(t.strokeStyle=r,t.stroke())},I=function(){var t=function(i,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},t(i,n)};return function(i,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),R=function(t){function i(i,n,s,h){var r=t.call(this,i,n,s,h,h)||this;return r.Nt=1,r.Pt=1,r.color="#000",r}return I(i,t),i.prototype.update=function(i,n){t.prototype.update.call(this,i,n),this.Nt=e(this.Nt,this.Pt,.075)},i.prototype.setColor=function(t){this.color=t},i.prototype.dt=function(t){L(t,this.v,this.s.x,this.s.y*this.Nt,this.color)},i.prototype.blink=function(t){var i=this;clearTimeout(this.Ot),this.Pt=0,this.Ot=setTimeout((function(){return i.open()}),t)},i.prototype.open=function(){this.Pt=1},i}(d),H=function(){var t=function(i,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},t(i,n)};return function(i,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),D=function(){return D=Object.assign||function(t){for(var i,n=1,s=arguments.length;n<s;n++)for(var h in i=arguments[n])Object.prototype.hasOwnProperty.call(i,h)&&(t[h]=i[h]);return t},D.apply(this,arguments)},N={Ut:"red",Wt:10,width:1,Yt:100,qt:200,Bt:1,Ft:1,Kt:7,zt:0,color:"#000"},P=function(t){function i(i,n){var s=t.call(this,i,0,0,0,0)||this;return s.Nt=0,s.Pt=0,s.Gt=1,s.options=D({},N),s.Vt(n),s.blink(s.options.qt,s.options.Yt),s.left=new R(i,-50*s.options.width,0,s.options.Wt),s.right=new R(i,50*s.options.width,0,s.options.Wt),s}return H(i,t),i.prototype.Vt=function(t){var i,n;this.options=D(D({},this.options),t),null===(i=this.left)||void 0===i||i.setColor(t.color),null===(n=this.right)||void 0===n||n.setColor(t.color)},i.prototype.blink=function(t,i){var n=this;setTimeout((function(){return n.left.blink(t)}),m(0,i)),setTimeout((function(){return n.right.blink(t)}),m(0,i)),setTimeout((function(){return n.blink(t,i)}),m(1e3,4e3))},i.prototype.update=function(i,n){t.prototype.update.call(this,i,n),this.Nt=e(this.Nt,this.Pt,.1),this.left.update(i,n),this.right.update(i,n),Math.random()<.002&&(this.Gt*=-1)},i.prototype.dt=function(t){L(t,{x:-65*this.options.width-this.options.zt,y:20},15*this.options.Bt,10*this.options.Bt,this.options.Ut),L(t,{x:65*this.options.width+this.options.zt,y:20},15*this.options.Bt,10*this.options.Bt,this.options.Ut),t.lineCap="round",t.lineJoin="round",t.lineWidth=this.options.Kt,t.strokeStyle=this.options.color,t.fillStyle=this.options.color,this.Jt&&(t.beginPath(),t.moveTo(-50*this.options.width+10,-5),t.lineTo(-50*this.options.width-20,-20),t.stroke(),t.beginPath(),t.moveTo(50*this.options.width-10,-5),t.lineTo(50*this.options.width+20,-20),t.stroke()),t.save(),t.scale(this.Gt,1),t.beginPath();var i=this.options.width*this.options.Ft;t.moveTo(-40*i,20);var n=this.Jt?-30:0;t.quadraticCurveTo(0,40-60*i*this.Nt+n,40*i,20),t.quadraticCurveTo(0,40+60*i*this.Nt+n,-40*i,20),t.stroke(),t.fill(),t.restore(),this.left.dt(t),this.right.dt(t)},i.prototype.Qt=function(t,i){var n=this;clearTimeout(this.Xt),this.Pt=t,this.Xt=setTimeout((function(){return n.Zt()}),1e3*i)},i.prototype.Zt=function(){this.Pt=0},i}(d),U=function(){var t=function(i,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},t(i,n)};return function(i,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),W=function(t){function i(i,n,s,h,r,o){var u=t.call(this,i,n,s,0,0)||this;return u.$t=h,u.ti=r,u.ii=o,u.height=0,u.ni=0,u.si=0,u.face=new P(u.ot,{Ut:"#ed4ea3aa",width:.6,Ft:.7,Kt:11,zt:5,Bt:1.1}),u.hi=b(E),u.ri=Math.random()<.5?1:-1,u.vt=.005*(.8+.4*Math.random()),u}return U(i,t),i.prototype.oi=function(){switch(this.ui){case"cannoneer":return"He will allow you to make up to two shots every turn...";case"quartermaster":return"He will repair random cargo when you roll a blank...";case"navigator":return"He will allow you to reroll an extra time..."}},i.prototype.ei=function(){switch(this.ui){case"cannoneer":this.v={x:170,y:-170};break;case"quartermaster":this.v={x:-80,y:-100};break;case"navigator":this.v={x:0,y:-400}}},i.prototype.clone=function(){var t=new i(this.ot,0,0,this.$t,this.ti,null);return t.ui=this.ui,t.hi=this.hi,t.face.Jt=this.face.Jt,t.ei(),t},i.prototype.update=function(i,n){this.face.update(i,n),this.height>0&&(this.height=u(this.height-.0025*this.delta)),this.ni=Math.sin((1-this.height)*Math.PI),this.si=Math.sin(.005*i),t.prototype.update.call(this,i,n)},i.prototype.fi=function(t){var i=this;void 0===t&&(t=this.v),this.height=1,this.lt.move(t,.3),this.ot.S.G(),setTimeout((function(){return i.ot.S.V()}),370)},i.prototype.Qt=function(){this.face.Qt(1.5,.175)},i.prototype.pose=function(t){t&&this.fi(),this.ci=t},i.prototype.dt=function(t){var i=this.ai&&this.face.Jt;t.lineCap="round",t.save(),t.translate(this.v.x,this.v.y),this.ii||t.scale(.9,.9),i&&t.scale(1.3,1.3),t.translate(0,50*-this.ni-(this.ci?10:0));var n=i?-35:-45;if(this.vi(t,1,this.ci?n:0),this.vi(t,-1,0),t.translate(0,10*-this.ct),t.rotate(.05*this.si-(this.ci?.3:0)),t.beginPath(),t.moveTo(0,-40),t.lineTo(0,-90),t.lineWidth=50,t.strokeStyle="#000",t.stroke(),t.lineWidth=35,t.strokeStyle=this.hi,t.stroke(),t.translate(0,-20),this.li(t,1,this.ci?-30:10+10*this.ct),this.li(t,-1,0),t.translate(4,-50-5*this.ct),t.scale(.3,.3),t.globalCompositeOperation="multiply",this.face.dt(t),t.globalCompositeOperation="source-over",t.translate(-13,0),t.scale(4.5,4.5),t.translate(0,7*this.ct-18-20*u(this.ni-.5)),t.rotate(.5*u(this.ni-.75)),t.fillStyle=this.$t,t.lineWidth=6,t.beginPath(),t.translate(0,20-5*this.ct),t.scale(1.5*this.ri,1.5),this.ai)return t.scale(.75,.75),t.translate(0,-12),t.fillStyle="yellow",t.moveTo(-12,-10),t.lineTo(12,-10),t.lineTo(12,-25),t.lineTo(5,-19),t.lineTo(0,-27),t.lineTo(-5,-19),t.lineTo(-12,-25),t.closePath(),t.stroke(),t.fill(),void t.restore();t.translate(2,-1),t.moveTo(8,-15),t.bezierCurveTo(-12,-5,-12,-5,-20,-5-2*this.ct),t.bezierCurveTo(-10,-26,-3,2*this.ct-26,10,-18),t.stroke(),t.fill(),t.fillStyle=this.ti,t.beginPath(),t.moveTo(9,-17),t.bezierCurveTo(7,-25,7,-25,15-2*this.ct-this.si,-35),t.bezierCurveTo(15,-25,15,-25,9,-17),t.stroke(),t.fill(),t.restore()},i.prototype.vi=function(t,i,n){t.strokeStyle="#000",t.lineWidth=7,t.beginPath(),t.lineJoin="round",t.moveTo(0,-30-10*this.ct);var s=20*u(this.ni-.5);t.quadraticCurveTo(30*i*(1+.2*this.ct)-.2*s*i,-30-5*this.ct+s-.2*s*i+n,22*i-s*i,s+n),t.stroke()},i.prototype.di=function(t,i,n,s,h){t.quadraticCurveTo(i,n,s,h),t.stroke(),k(t,{x:s,y:h},3,"#000")},i.prototype.li=function(t,i,n){t.save(),t.translate(22*i,10*this.ct-15),t.strokeStyle="#000",t.lineWidth=7,t.beginPath();var s=-15*this.ct;t.moveTo(0,s-15),i<0||!this.ii?this.di(t,20*i-5*this.si+-10*this.ni,1.2*s-20,15*i+5*this.si,s+-10*this.ni):this.di(t,20*i-10*this.si+3*this.ct,5+1.2*s+n,20*i,-25+s+n),t.stroke(),i>0&&this.ii&&(t.translate(20*i,-25+s+n),this.ci&&t.rotate(.2*-this.ct),t.beginPath(),t.moveTo(0,0),t.lineTo(0,50),t.lineWidth=12,t.stroke(),t.strokeStyle=this.ii,t.lineWidth=6,t.stroke()),t.restore()},i}(d),Y="Arial Black,HelveticaNeue-CondensedBlack,arial,sans-serif",q=function(){var t=function(i,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},t(i,n)};return function(i,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),B=function(t){function i(i,n,s,h,r,o,u){var e=t.call(this,i,n,s,h,r)||this;return e.yi=o,e.wi=u,e.ratio=1,e.start=-1,e}return q(i,t),i.prototype.update=function(t,i){this.Ht||this.yi<0||(this.v={x:this.v.x+this.wi.x,y:this.v.y+this.wi.y},this.ratio=1-(t-this.start)/(1e3*this.yi),this.start<0&&(this.start=t),t-this.start>1e3*this.yi&&(this.Ht=!0))},i}(d),F=function(){var t=function(i,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},t(i,n)};return function(i,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),K=function(t){function i(i,n,s,h,r,o,u){void 0===r&&(r=1),void 0===o&&(o=0),void 0===u&&(u=40);var e=t.call(this,i,n,s,h,h,(.3+.1*Math.random())*r,f)||this;return e.mi=h,e.Mi=o,e.alpha=u,e}return F(i,t),i.prototype.dt=function(t){var i=Math.max(0,Math.min(1-this.ratio,1)),n="#ffffff"+Math.round(i*this.alpha).toString(16).padStart(2,"0");k(t,this.v,i*this.mi,this.Mi>0?"#ffffff00":n),this.Mi>0&&(t.strokeStyle=n,t.lineWidth=this.Mi,t.stroke())},i}(B),z=function(){var t=function(i,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},t(i,n)};return function(i,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),G=function(t){function i(i,n,s,h,r,o,u,e){var f,c=this;return(c=t.call(this,i,n,s,h,r,o,u)||this).options=e,(null===(f=c.options)||void 0===f?void 0:f.bi)&&(c.d=c.options.bi),c}return z(i,t),i.prototype.update=function(i,n){var s;(null===(s=this.options)||void 0===s?void 0:s.force)&&(this.wi={x:this.wi.x+this.options.force.x,y:this.wi.y+this.options.force.y}),t.prototype.update.call(this,i,n)},i.prototype.dt=function(t){var i,n;t.fillStyle=null!==(n=null===(i=this.options)||void 0===i?void 0:i.color)&&void 0!==n?n:"#fff",t.fillRect(this.v.x-.5*this.s.x,this.v.y-.5*this.s.y,this.s.x,this.s.y)},i}(B),V=function(){var t=function(i,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},t(i,n)};return function(i,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),J=function(t){function i(i,n,s,h,r,o,u,e){var f=t.call(this,i,h,r,0,0,o,u)||this;return f.content=n,f.fontSize=s,f.options=e,f}return V(i,t),i.prototype.dt=function(t){var i;t.save();var n=(null===(i=this.options)||void 0===i?void 0:i.Ti)?this.ratio:1;t.font="".concat(this.fontSize*n,"px ").concat(Y),t.fillStyle="#000",t.fillText(this.content,this.v.x+this.options.pi,this.v.y+this.options.pi),t.fillStyle="#fff",t.fillText(this.content,this.v.x,this.v.y),t.restore()},i.prototype.Oi=function(t){var i,n=(null===(i=this.options)||void 0===i?void 0:i.Ti)?this.ratio:1;return t.font="".concat(this.fontSize*n,"px ").concat(Y),Math.max.apply(Math,this.content.split("\n").map((function(i){return t.measureText(i).width})))},i}(B),Q=function(){var t=function(i,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},t(i,n)};return function(i,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),X=function(t){function i(i,n,s,h,r,o,u,e){var c=t.call(this,i,n,s,h,r,-1,f,e)||this;return c.frequency=o,c.amplitude=u,c.time=0,c.scale={x:1,y:1},c}return Q(i,t),i.prototype.update=function(i,n){t.prototype.update.call(this,i,n),this.lt.update(i),this.time=i},i.prototype.toggle=function(t){var i=this;clearTimeout(this.Ot),this.Ot=setTimeout((function(){return i.content=t}),t?0:200);var n=t?1:0;this.lt.scale({x:n,y:n},.2)},i.prototype.dt=function(t){var i,n,s,h,r,o,e,f,c=this;t.save(),t.rotate(null!==(n=null===(i=this.options)||void 0===i?void 0:i.angle)&&void 0!==n?n:0),this.ratio=u(this.scale.x);var a=(null===(s=this.options)||void 0===s?void 0:s.Ti)?this.ratio:1;t.textAlign="left",t.font="".concat(this.fontSize*a,"px ").concat(Y);var v=null!==(r=null===(h=this.options)||void 0===h?void 0:h.spacing)&&void 0!==r?r:0,l=this.Oi(t),d="center"!==(null===(o=this.options)||void 0===o?void 0:o.align)&&(null===(e=this.options)||void 0===e?void 0:e.align)?0:.5*-l;"right"==(null===(f=this.options)||void 0===f?void 0:f.align)&&(d=-l),this.content.split("").forEach((function(i,n){t.fillStyle="#000",t.fillText(i,c.v.x+v*n+c.options.pi+d,c.v.y+c.options.pi+Math.sin(.005*c.time+n*c.frequency)*c.amplitude),t.fillStyle="#fff",t.fillText(i,c.v.x+v*n+d,c.v.y+Math.sin(.005*c.time+n*c.frequency)*c.amplitude),d+=t.measureText(i).width})),t.restore()},i}(J),Z=function(){var t=function(i,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},t(i,n)};return function(i,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),$=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Z(i,t),i.prototype._i=function(t){return this.xi?this.color:t},i.prototype.ji=function(t,i){var n=this;void 0===t&&(t=.1),void 0===i&&(i="#fff"),this.xi=!0,this.color=i,setTimeout((function(){return n.xi=!1}),1e3*t)},i}(d),tt=function(){var t=function(i,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},t(i,n)};return function(i,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),it=function(){return it=Object.assign||function(t){for(var i,n=1,s=arguments.length;n<s;n++)for(var h in i=arguments[n])Object.prototype.hasOwnProperty.call(i,h)&&(t[h]=i[h]);return t},it.apply(this,arguments)},nt=function(t,i,n){if(n||2===arguments.length)for(var s,h=0,r=i.length;h<r;h++)!s&&h in i||(s||(s=Array.prototype.slice.call(i,0,h)),s[h]=i[h]);return t.concat(s||Array.prototype.slice.call(i))},st=function(t){function i(i,n,s,h,r){var o=t.call(this,i,s,550,0,0)||this;return o.name=n,o.St=h,o.gi=r,o.Ai=[],o.Ei=[],o.Si=0,o.Ci=0,o.tt=0,o.ki=[],o.Li=["quartermaster","cannoneer","navigator"],o.Ii=0,o.vt=.005,o.Ri=[b(S),b(S),b(S),b(C),b(C)],o.message=new X(i,"",30,o.gi?300:-300,-200,.5,3,{pi:4,align:"center",Ti:!0}),o.Hi=new A(i),o.Di=o.Ni(70,-100,!0),o}return tt(i,t),i.prototype.Pi=function(){return this.Ai.length<10?3:this.Ai.length<20?4:this.Ai.length<30?5:6},i.prototype.pop=function(t,i,n){this.Hi.add(new J(this.ot,t,60,this.v.x+i*this.Ui(),this.v.y+n,1.2,{x:0,y:-2.5},{pi:4,Ti:!0}))},i.prototype.Wi=function(){var t=this.ki.find((function(t){return"quartermaster"==t.ui}));if(t){var i=b(this.Ai);t.fi(),i.Yi()}},i.prototype.qi=function(){this.ki=[]},i.prototype.Ni=function(t,i,n){return void 0===n&&(n=!1),new W(this.ot,t,i,this.Ri[4],this.Ri[3],n?b(S):null)},i.prototype.has=function(t){return this.ki.some((function(i){return i.ui==t}))},i.prototype.Bi=function(){return b(this.Li)},i.prototype.Fi=function(t){this.Li=this.Li.filter((function(i){return i!==t.ui})),this.ki.push(t),this.Ki()},i.prototype.zi=function(t){var i=this;this.message.toggle(t),this.Di.Qt(),setTimeout((function(){return i.Di.Qt()}),320),setTimeout((function(){return i.message.toggle("")}),1e3)},i.prototype.Gi=function(){this.zi("UNLUCKY 13!"),this.ot.S.Z(),this.gi&&this.ot.At._t(.7,1.5)},i.prototype.Vi=function(){return 0===this.Ai.length},i.prototype.Ji=function(){this.Di.ai=!0},i.prototype.Qt=function(){this.Di.Qt()},i.prototype.Qi=function(t){t<=0?this.St.Xi():(this.tt=t,this.Ai.forEach((function(t){return t.Zi()})))},i.prototype.$i=function(t){var i,n=null!==(i=this.Ai.find((function(i){return i.tn()>t})))&&void 0!==i?i:nt([],this.Ai,!0).sort((function(t,i){return t.tn()-i.tn()}))[0];if(n)return this.nn(n,t),t-n.tn()},i.prototype.Ui=function(){return this.gi?1:-1},i.prototype.nn=function(t,i){var n=this;t.mark(),setTimeout((function(){n.ot.At._t(n.gi?.85:1.21,n.gi?1:2),n.Qt(),n.ji(),n.ot.jt.Tt(20,.3,2),n.ot.S.q();var s=c(n.v,-50*n.Ui(),340-n.v.y);n.pulse(s.x+40,s.y-100,200),n.pop(i.toString(),t.v.x+25,t.v.y),t.$i(i)&&(n.Ai=n.Ai.filter((function(i){return i!=t})),n.sn()),n.Ci=1}),500)},i.prototype.hn=function(){return nt([this.Di],this.ki,!0)},i.prototype.rn=function(){var t=this;this.Di.Qt(),this.hn().forEach((function(t){return t.fi()})),setTimeout((function(){return t.Di.pose(!1)}),300),this.Si=1,this.Ci=1;var i=this.Ui(),n=c(this.v,300*i,320-this.v.y);this.on.Y(n,800*i),this.ot.jt.Tt(15,.2,1.25),this.pulse(n.x+40,n.y-20,80),this.ot.S.Y()},i.prototype.Y=function(t,i){var n,s=this;void 0===i&&(i=!0),this.rn();var h=null===(n=this.un)||void 0===n?void 0:n.$i(t);setTimeout((function(){s.has("cannoneer")&&h>0&&i&&s.un.en(h)?s.Y(h,!1):s.St.Xi()}),500)},i.prototype.en=function(t){return this.Ai.length>1||this.fn()>t},i.prototype.pulse=function(t,i,n){this.ot.St.add(new K(this.ot,t,i,n,.15,0,150))},i.prototype.cn=function(t){this.Ai.push(t),t.v=this.an(this.Ai.length-1),this.sn()},i.prototype.vn=function(){return this.Ai.length},i.prototype.an=function(t){var i=this.Pi();return{x:-105*Math.floor(t/i)-180+20*Math.random(),y:t%i*-100-240}},i.prototype.sn=function(){var t=this;this.Ai.forEach((function(i,n){return i.move(t.an(n))})),this.Ki()},i.prototype.ln=function(){return this.tt>0},i.prototype.dn=function(){return this.Ai.some((function(t){return t.yn()}))},i.prototype.wn=function(){this.Ai.filter((function(t){return t.yn()})).forEach((function(t){return t.Zi(!0)}))},i.prototype.update=function(i,n){var s=this;if(t.prototype.update.call(this,i,n),this.hn().forEach((function(t){return t.update(i,n)})),this.Hi.update(i,n),this.message.update(i,n),nt(nt([],this.Ai,!0),this.Ei,!0).forEach((function(t){return t.update(i,s.mn(n,s.ot.jt))})),this.Si>0&&(this.Si=Math.max(0,this.Si-.075)),this.Ci>0&&(this.Ci=Math.max(0,this.Ci-.05)),this.Mn&&this.Hi.add(new G(this.ot,this.v.x-550*Math.random(),500,10,10,.3,{x:(-2-5*Math.random())*this.Ui(),y:-4-3*Math.random()},{force:{x:0,y:.5},color:"#ffffffcc"})),n.It&&this.gi){var h=this.Ai.find((function(t){return t.bn()}));if(h&&(this.St.W(h),this.tt>0)){if(this.Ii++,this.un.rn(),this.nn(h,this.tt),this.tt=this.tt-h.tn(),this.un.has("cannoneer")&&this.tt>0&&this.Ii<2&&this.en(this.tt))return this.St.info(),void setTimeout((function(){s.ot.S.tt(),s.St.info("Another ".concat(s.tt," damage!"),"Choose cargo taking the hit...")}),750);this.Ii=0,this.tt=0,this.Tn(),setTimeout((function(){return s.St.Xi()}),500)}}},i.prototype.pn=function(t){this.name=t},i.prototype.On=function(){return this.Ai.length>0},i.prototype._n=function(t){var i=this;this.Ai.slice(0,t).forEach((function(t,n){var s=i.an(n);t.v=c(i.v,-s.x-50,s.y),i.remove(t),i.Ei.push(t),t.move(c(i.un.an(i.un.Ai.length+n),i.un.v.x+150,i.un.v.y),(function(){i.un.cn(t),i.Ei=[]}))})),this.ot.S.$(),this.sn()},i.prototype.remove=function(t){this.Ai=this.Ai.filter((function(i){return i!=t}))},i.prototype.Tn=function(){this.Ai.forEach((function(t){return t.Zi(!1)}))},i.prototype.mn=function(t,i,n,s){return void 0===n&&(n=0),void 0===s&&(s=0),it(it({},t),{x:t.x/i.zoom-400+i.shift+n,y:t.y/i.zoom-550-i.pan.y+s})},i.prototype.xn=function(){this.gi&&this.ot.S.$();var t=this.Ai.filter((function(t){return t.jn()}));t.length>0&&b(t).gn()},i.prototype.X=function(){this.ot.S.X(),this.hn().forEach((function(t){return t.fi()})),this.lt.ht(a),this.lt.move(c(this.v,0,800/this.ot.jt.zoom),1.5)},i.prototype.pose=function(t){this.Di.pose(t)},i.prototype.fi=function(){this.hn().forEach((function(t){return t.fi()}))},i.prototype.An=function(){return this.v.x+100*this.Ui()},i.prototype.dt=function(t){if(!this.hidden){t.strokeStyle=this._i("#000"),t.save();var i=this.Ui();t.translate(this.v.x-20*this.Ci*i,this.v.y-10*Math.cos(this.ft)),t.rotate(.02*this.ft-.05*this.Ci*i),t.scale(i,1),t.fillStyle=this._i(this.Ri[0]);if(t.beginPath(),t.rect(-10,-550,15,520),t.fill(),t.stroke(),t.fillStyle=this._i(this.Ri[3]),t.beginPath(),t.moveTo(-20,-520),t.quadraticCurveTo(-200-10*this.ft,-400,-300-10*this.ft,-180-10*this.ft),t.lineTo(-20,-180),t.closePath(),t.fill(),t.stroke(),this.Ai.filter((function(t){return!t.bn()})).forEach((function(i){return i.dt(t)})),this.Ai.filter((function(t){return t.bn()})).forEach((function(i){return i.dt(t)})),t.strokeStyle=this._i("#000"),t.save(),t.translate(160,0),t.rotate(-.1-.1*this.Si),!this.En){t.fillStyle=this._i("#666"),t.save(),t.rotate(.2*-this.Si),t.translate(190-10*this.Si,0),t.beginPath();t.moveTo(0,-225),t.bezierCurveTo(-300,-250,-300,-150,0,-175),t.closePath(),t.fill(),t.stroke(),t.beginPath(),t.rect(-20,-230,20,60),t.fill(),t.stroke(),t.restore(),t.fillStyle=this._i(this.Ri[1]),t.beginPath(),t.moveTo(0,-150),t.bezierCurveTo(0,-230,70,-230,70,-150),t.closePath(),t.fill(),t.stroke(),k(t,{x:35,y:-190},8,this._i("#000"))}t.restore(),t.save(),t.scale(1.4,1.4),this.hn().forEach((function(i){return i.dt(t)})),t.restore(),t.fillStyle=this._i(this.Ri[2]),t.beginPath();var n=this.Sn();t.moveTo(-200-n,-150),t.lineTo(-170-n,10),t.lineTo(180,10),t.lineTo(250,-160),t.closePath(),t.moveTo(-193-n,-110),t.lineTo(233,-120),t.moveTo(-190-n+7,-72),t.lineTo(213,-77),t.moveTo(-180-n+7,-30),t.lineTo(193,-30),!this.En&&this.has("navigator")&&(t.moveTo(-60,-535),t.lineTo(-80,-595),t.lineTo(80,-595),t.lineTo(60,-535),t.closePath(),t.moveTo(-70,-565),t.lineTo(70,-565)),t.fill(),t.stroke(),t.translate(-120,-100),t.scale(this.Ui(),1),t.lineWidth=12,t.lineJoin="round",t.fillStyle=this.Ri[4],t.font="40px ".concat(Y),t.textAlign="center",t.strokeText(this.name,0,0),t.fillText(this.name,0,0),this.message.dt(t),t.restore(),this.Hi.dt(t),this.Ei.forEach((function(i){return i.dt(t)}))}},i.prototype.Ki=function(){var t=this.ki.find((function(t){return"quartermaster"==t.ui}));if(t){var i=this.Pi();t.fi({x:-45-40*Math.max(Math.floor(this.Ai.length/i),1),y:-105-70*Math.min(i,this.Ai.length)})}},i.prototype.Cn=function(){this.Ai.forEach((function(t){return t.kn(!1)}))},i.prototype.Ln=function(t){nt([],this.Ai,!0).sort(T).slice(0,t).forEach((function(t){return t.kn()}))},i.prototype.fn=function(){return this.Ai.reduce((function(t,i){return t+i.tn()}),0)},i.prototype.In=function(){return 13==this.fn()},i.prototype.Rn=function(){this.Ai.forEach((function(t){return t.Hn()})),this.Ki()},i.prototype.K=function(t){var i=this;void 0===t&&(t=1),this.Di.fi(),this.lt.ht(v),this.lt.move(c(this.v,2e3*t,0),6),setTimeout((function(){return i.Mn=!0}),300),setTimeout((function(){return i.Mn=!1}),5e3);for(var n=0;n<7;n++)setTimeout((function(){return i.ot.S.K(.1+.3*Math.random())}),750*n)},i.prototype.Dn=function(){this.Ai=[]},i.prototype.Sn=function(){return 100*Math.floor(Math.max(this.has("navigator")?4:1,this.Ai.length-1)/this.Pi())},i}($),ht=function(){var t=function(i,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},t(i,n)};return function(i,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),rt=function(t){function i(i,n,s,h){void 0===h&&(h=!1);var r=t.call(this,i,n,s,100,100)||this;return r.Nn=h,r.Pn(),r.Un(),r.vt=.005,r}return ht(i,t),i.prototype.kn=function(t){void 0===t&&(t=!0),this.Wn=t},i.prototype.yn=function(){return this.Wn},i.prototype.Zi=function(t){void 0===t&&(t=!0),this.Yn=t},i.prototype.mark=function(t){void 0===t&&(t=!0),this.qn=t},i.prototype.Pn=function(){this.value=this.Nn?M(0,2):M(1,6)},i.prototype.tn=function(){return this.value},i.prototype.Un=function(){this.rotation=Math.random()<.5?0:.5*Math.PI},i.prototype.F=function(t,i){var n=this;this.ot.S.B(),this.lt.move({x:t,y:i},.3),this.Bn=!0,setTimeout((function(){n.ot.S.F(),n.Bn=!1,n.Un()}),300)},i.prototype.move=function(t,i){this.lt.move(t,.3),i&&setTimeout(i,300)},i.prototype.update=function(i,n){t.prototype.update.call(this,i,n),this.Fn=this.Yn&&this.wt(n,5),this.Bn&&(this.Pn(),this.rotation+=.1*i)},i.prototype.float=function(t){this.Kn=t},i.prototype.bn=function(){return this.Fn||this.qn},i.prototype.gn=function(){this.zn=!0,this.ji(.2,"#afe6ac")},i.prototype.jn=function(){return!this.zn&&!this.Wn},i.prototype.$i=function(t){return this.qn=!1,this.value=Math.max(0,this.value-Math.min(t,this.zn?1:t)),this.value<=0},i.prototype.Yi=function(){this.ji(.2,"#afe6ac"),this.value=Math.min(this.value+1,9)},i.prototype.Gn=function(t){if(this.Fn||this.qn){t.strokeStyle="#e92";t.strokeRect(-55,-55,110,110)}},i.prototype.Hn=function(){this.F(this.v.x,this.v.y)},i.prototype.Vn=function(){return this.Kn?7*this.ft:0},i.prototype.Jn=function(){return(this.v.x-this.v.y)*(this.Fn?1:10)},i.prototype.dt=function(t){t.strokeStyle=this.xi?"#68ad65":"#000",t.save(),t.beginPath(),t.translate(this.v.x+50,this.v.y+50+this.Vn()+(this.Bn?-150*Math.sin(this.lt.time*Math.PI):0)),t.rotate(this.rotation),t.fillStyle=this.Wn?"#e92":"#fff",this.zn&&(t.fillStyle="#a9c5db"),(this.Fn||this.qn)&&(t.fillStyle="#f2e949"),this.xi&&(t.fillStyle=this._i("#fff")),t.rect(-50,-50,100,100),t.fill(),t.stroke(),t.closePath(),1!==this.value&&3!==this.value&&5!==this.value&&7!==this.value&&9!==this.value||this.Qn(t,0,0),this.value>1&&(this.Qn(t,-25,-25),this.Qn(t,25,25)),this.value>3&&(this.Qn(t,-25,25),this.Qn(t,25,-25)),this.value>5&&(this.Qn(t,0,-25),this.Qn(t,0,25)),this.value>7&&(this.Qn(t,25,0),this.Qn(t,-25,0)),this.Gn(t),t.restore()},i.prototype.Qn=function(t,i,n){if(t.fillStyle=this.xi?"#68ad65":"#000",this.Nn)return t.font="45px ".concat(Y),void t.fillText("✦",.8*i-20,.8*n+15);k(t,{x:i,y:n},this.Nn?12:8,t.fillStyle,"transparent")},i}($),ot=function(){var t=function(i,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},t(i,n)};return function(i,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),ut=function(t){function i(i,n,s,h,r,o,u,e,f){void 0===f&&(f=30);var c=t.call(this,i,s-.5*r,h-.5*o,r,o)||this;return c.content=n,c.Xn=u,c.S=e,c.fontSize=f,c.visible=!0,c.Zn=5,c}return ot(i,t),i.prototype.kt=function(){this.S.P(),this.Xn()},i.prototype.$n=function(t){this.content=t},i.prototype.update=function(t,i){if(this.visible){var n=this.ts;this.ts=!i.ns&&this.wt(i),!n&&this.ts&&this.ss(),i.It||(this.pressed&&!i.ns&&this.ts&&this.Xn(),this.pressed=!1),!this.ts||!i.It||this.pressed||i.ns||(this.pressed=!0)}},i.prototype.dt=function(t){this.visible&&(t.save(),t.translate(0,this.ts?-5:0),t.fillStyle="#000",t.fillRect(this.v.x,this.v.y,this.s.x,this.s.y),t.fillStyle=this.ts?"#f2e949":"#fff",t.fillRect(this.v.x+this.Zn,this.v.y+this.Zn,this.s.x-2*this.Zn,this.s.y-2*this.Zn),t.font="".concat(this.fontSize,"px ").concat(Y),t.textAlign="center",t.fillStyle="#000",t.fillText(this.content,this.v.x+.5*this.s.x,this.v.y+.5*this.s.y+.3*this.fontSize),t.restore())},i.prototype.ss=function(){this.S.U()},i}(d),et=function(){var t=function(i,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},t(i,n)};return function(i,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),ft=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return et(i,t),i.prototype.dt=function(t){this.visible&&k(t,this.v,20,"#333","#000")},i.prototype.Y=function(t,i){var n=this;this.visible=!0,this.lt.ht(a),this.v=t,this.lt.move(c(t,i,-100),.4),setTimeout((function(){return n.visible=!1}),400)},i}(d),ct=function(){var t=function(i,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},t(i,n)};return function(i,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),at=function(){return at=Object.assign||function(t){for(var i,n=1,s=arguments.length;n<s;n++)for(var h in i=arguments[n])Object.prototype.hasOwnProperty.call(i,h)&&(t[h]=i[h]);return t},at.apply(this,arguments)},vt=function(t,i,n){if(n||2===arguments.length)for(var s,h=0,r=i.length;h<r;h++)!s&&h in i||(s||(s=Array.prototype.slice.call(i,0,h)),s[h]=i[h]);return t.concat(s||Array.prototype.slice.call(i))},lt=26,dt=function(t){function i(i){var n=t.call(this,i,0,0,[])||this;return n.Ai=[],n.hs=.75,n.rs=0,n.level=0,n.os=[],n.on=new ft(n.ot,100,100,0,0),n.us=new st(i,"14",0,n,!0),n.es=n.us,n.vt=.002,n.fs=new X(i,"Lets start by rolling for your cargo!",35,400,60,.2,3,{pi:4,align:"center",Ti:!0}),n.cs=new X(i,"",25,400,105,.2,3,{pi:3,align:"center",Ti:!0}),n.vs=new X(i,"~ COUP AHOO ~",80,400,150,.2,3,{pi:6,align:"center",Ti:!0}),n.action=new ut(i,"ROLL",690,360,200,55,(function(){return n.ls()}),i.S,20),n.ds=new ut(i,"",720,360,140,55,(function(){return n.ys(!0)}),i.S,20),n.ws=new ut(i,"",570,360,140,55,(function(){return n.ys(!1)}),i.S,20),n.ds.visible=!1,n.ws.visible=!1,n.Ms("ROLL",(function(){n.bs(),setTimeout((function(){return n.Ts("ROLL","KEEP","Cast the dice once more?","",(function(){n.Hn(),setTimeout((function(){n.ps(n.us),n.Os()}),500)}),(function(){n.ps(n.us),n.Os()}))}),500)})),n._s=i.jt,n._s.zoom=n.hs,n._s.pan={x:-100,y:-20},n._s.shift=0,n.xs=Array.from(Array(50)).map((function(t,i){return{x:200*i-1e3,y:600*Math.random()-300,speed:Math.random(),scale:.75+1.3*Math.random()}})),i.Lt((function(t){"m"==t.key&&n.ot.S.C()})),n}return ct(i,t),i.prototype.js=function(){this.ot.At._t(.2),this.ot.At.xt(1,5),this.ot.S.I(.7),this.ot.Rt(new i(this.ot))},i.prototype.ys=function(t){this.info(),this.ds.visible=!1,this.ws.visible=!1,t&&this.gs(),t||this.As()},i.prototype.Hn=function(){this.es.Qt(),vt(vt([],this.Ai,!0),this.os,!0).forEach((function(t){return t.Hn()})),this.Es()},i.prototype.Ms=function(t,i){var n=this;clearTimeout(this.Ss),this.Ss=setTimeout((function(){n.action.visible=!0,n.action.$n(t),n.Cs=i}),500)},i.prototype.Ts=function(t,i,n,s,h,r){clearTimeout(this.Ss),this.ds.$n(t),this.ws.$n(i),this.info(n,s),this.ds.visible=!0,this.ws.visible=!0,this.gs=h,this.As=r},i.prototype.ks=function(t,i,n,s){this.Ts("YEAH","NOPE",t,i,n,s)},i.prototype.ls=function(){this.info(),this.action.visible=!1,this.Cs&&this.Cs()},i.prototype.Ls=function(){var t=this;this.Is=!0,this.F(this.es.vn()),setTimeout((function(){return t.Rs("Would you like to roll again?","The total is ".concat(t.Hs(),"..."),(function(){return t.Y()}))}),500)},i.prototype.Ds=function(t,i,n){if(this.es.has("navigator")&&!this.Ns)return this.Ns=!0,void this.Rs(t,this.os.length>0?i:"The total is ".concat(this.Hs(),"..."),n);n(),this.Ai=[]},i.prototype.Rs=function(t,i,n){var s=this;if(!this.es.gi)return this.Hs()<this.Ai.length?(this.Hn(),void setTimeout((function(){return s.Ds(t,i,n)}),750)):void n();this.Ts("ROLL","KEEP",t,i,(function(){s.Hn(),setTimeout((function(){return s.Ds(t,i,n)}),750)}),(function(){n(),s.Ai=[]}))},i.prototype.Y=function(){var t=this.Hs();if(13==t&&this.es.Gi(),13!=t&&0!=t)return this.es.un.gi&&this.es.un.vn()>1?(this.ot.S.tt(),this.info("Incoming ".concat(t," damage!"),"Select cargo taking the hit..."),void this.us.Qi(t)):void this.es.Y(t);this.Xi()},i.prototype.bs=function(){var t=this;this.F(2,-80,-40),this.action.visible=!1,this.info(),setTimeout((function(){t.info("Cast the dice once more?"),t.ds.visible=!0,t.ws.visible=!0}),500)},i.prototype.Xi=function(){var t=this;if(this.Ns=!1,this.Ai=[],this.info(),this.Ps)this.Os();else{if(this.Us.Vi()&&!this.Ps)return this.Ps=!0,this.Us.X(),this.es=this.us,this.Ws(),void setTimeout((function(){t.ot.S.J(),t.Rs("Victory! Nicely done!","Would you like to reroll the loot?",(function(){t.Os(),t.Ys()}))}),750);this.es=this.es.un,!this.es.In()||this.es.un.In()?(this.es.pose(!0),this.qs()):setTimeout((function(){t.es.Gi(),t.ot.S.Z(),setTimeout((function(){return t.Xi()}),500)}),500)}},i.prototype.Ws=function(){var t=this.Us.v.x-100,i=Math.min(this.level+1,6);this.os=[];for(var n=0;n<i;n++){var s=new rt(this.ot,t,300);s.F(t+120*n-.5*(i-1)*120,420),s.float(!0),s.Zi(!0),this.os.push(s)}vt([],this.os,!0).sort(T).slice(0,this.Bs()).forEach((function(t){return t.kn()}))},i.prototype.Bs=function(){return Math.min((this.level-1)/3+1,3)},i.prototype.Ys=function(){this.info("Don't be greedy!","You can only take one...")},i.prototype.info=function(t,i,n){var s=this;void 0===t&&(t=""),void 0===i&&(i=""),void 0===n&&(n=""),this.fs.toggle(t),setTimeout((function(){s.cs.toggle(i),s.vs.toggle(n)}),150)},i.prototype.Os=function(){var t=this;this.Ms("SET SAIL",(function(){return t.Fs()}))},i.prototype.Hs=function(){return this.Ai.reduce((function(t,i){return t+i.tn()}),0)},i.prototype.qs=function(){var t=this;if(this.es.on=this.on,this.es.Vi())return this.us.pose(!1),this.Us.pose(!0),this.ot.At.xt(0,5),this.info("Down to Davy Jones' Locker...","","GAME OVER"),this.Ms("TRY AGAIN?",(function(){return t.js()})),void setTimeout((function(){return t.us.X()}),100);this.es.gi?(this.Ms("SHOOT",(function(){return t.Ls()})),this.es.pose(!0)):setTimeout((function(){return t.Ls()}),1e3)},i.prototype.Fs=function(){var t=this;clearTimeout(this.Ss),this.us.pose(!1),this.Ns=!1,this.us.Tn(),this.Ps=!1,this.Ks=!1,this.es=this.us,this.level++,this.hs=.75,this._s.shift=0,this._s.pan.y=-25,this.us.K(),this.us.Qt(),this.action.$n(""),this.action.visible=!1,this.os.forEach((function(t){return t.Zi(!1)})),setTimeout((function(){t.Us=new st(t.ot,t.zs(),2e3*(t.level-1)+3e3,t,!1),t.us.un=t.Us,t.Us.un=t.us;for(var i=0;i<1+.5*(t.level-1);i++)t.Us.cn(new rt(t.ot,0,0));t.Us.Ln(t.Bs()-1)}),4e3),setTimeout((function(){return t.Gs()}),5e3)},i.prototype.zs=function(){return this.level>lt?"∞ × ".concat(this.level-lt):this.level%2==0?b(["VND","MRC","GIT","POO","SIN","CSS","ASH","CAP"]):(13-.5*(this.level-1)).toString()},i.prototype.Gs=function(){var t=this;if(this.zoom(),this.os=[],this.level%2==0&&this.level<=lt){this.Us.En=!0;var i=this.us.dn();if(this.level===lt)return this.Us.hidden=!0,void setTimeout((function(){t.zoom(),t.us.Ji(),t.us.pn("WIN"),t.us.pose(!0),t.ot.S.J(),t.info("You've defeated the whole 13th fleet!","","THE END?"),t.Os()}),1e3);switch(M(0,4-(this.us.Bi()?0:1))){case 0:this.Us.Cn(),setTimeout((function(){var n;t.ot.S.$(),null===(n=t.Us)||void 0===n||n.fi(),t.Os(),t.info("Ahoy mate! Interested in trade?",i?"I'll give you fresh cargo for your spice...":"Looks like you don't have any spice though..."),i&&(t.us.wn(),t.Ks=!0)}),1e3);break;case 1:setTimeout((function(){var i;t.ot.S.$(),null===(i=t.Us)||void 0===i||i.fi(),t.Ts("ROLL","KEEP","Hello there mate!","Would you like to reroll all your cargo?",(function(){t.us.Rn(),t.Vs()}),(function(){return t.Js()}))}),1e3);break;case 2:this.Us.hidden=!0,this.Os(),this.info("Free cargo floating in the drink!","A vessel must have sunken here..."),this.Ws();break;case 3:this.Us.xn(),setTimeout((function(){var i;t.ot.S.$(),null===(i=t.Us)||void 0===i||i.fi(),t.ks("Ahoy! I could plate one of your cargo!","It'll only be able to receive 1 damage at a time....",(function(){t.us.xn(),t.Vs()}),(function(){return t.Js()}))}),1e3);break;case 4:this.Us.Dn();var n=this.Us.Ni(-70,-100);n.ui=this.us.Bi(),this.Us.Fi(n),setTimeout((function(){var i;t.ot.S.$(),null===(i=t.Us)||void 0===i||i.fi(),t.ks("Oi! Want to hire this ".concat(n.ui,"?"),n.oi(),(function(){t.Us.qi(),t.us.Fi(n.clone()),t.Vs()}),(function(){return t.Js()}))}),1e3)}}else 25==this.level&&this.Us.Ji(),this.level>=25&&this.Qs(2),this.level>13&&this.Qs(1),this.Us.Di.face.Jt=!0,setTimeout((function(){t.info("Man the cannons! Battle stations!","There's no parley in sight..."),t.Us.zi(b(["FILTHY RAT","HOW DARE YOU","YOU TRAITOR","LAND LUBBER"])),t.ot.S.warn()}),1e3),setTimeout((function(){return t.qs()}),2e3)},i.prototype.Qs=function(t){for(var i=0;i<t;i++){var n=this.Us.Ni(-70,-100);n.face.Jt=!0,n.ui=this.Us.Bi(),this.Us.Fi(n.clone())}},i.prototype.Vs=function(){var t=this;this.Us.Qt(),this.info("All aboard, you're good to go!","May that steer you true..."),setTimeout((function(){return t.Xs()}),500)},i.prototype.Xs=function(){this.Us.K(-1),this.Os()},i.prototype.Js=function(){this.Us.Qt(),this.info("Aye, all set!","Fair winds on your voyage..."),this.Xs()},i.prototype.W=function(t){var i=this;this.Ks&&(this.ot.S.W(),t.Zi(!1),this.Us._n(t.tn()),this.us.remove(t),this.us.sn(),setTimeout((function(){i.us.dn()&&i.Us.On()||(i.Ks=!1,i.us.Tn(),i.Vs())}),500))},i.prototype.zoom=function(){var t,i,n,s=null===(t=this.us)||void 0===t?void 0:t.Sn(),h=null!==(n=null===(i=this.Us)||void 0===i?void 0:i.Sn())&&void 0!==n?n:0,r=Math.max(s,h);this.hs=Math.min(750/(1500+s+h),.5),this._s.pan.y=220+r-100/this._s.zoom,this._s.shift=100-s+h*this.hs*.25},i.prototype.ps=function(t){var i=this;t.Qt(),this.ot.S.W(),this.Ai.forEach((function(n,s){return n.move(c(t.an(s+t.vn()),i.us.v.x,i.us.v.y),(function(){return t.cn(n)}))})),setTimeout((function(){i.Ai=[]}),300)},i.prototype.F=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=0),this.es.Qt();var s=0;this.Ai=[];for(var h=0;h<t;h++){h>0&&h%9==0&&s++;var r=this.es.An(),o=new rt(this.ot,r,800,this.Is);o.F(r+i+120*h-.5*Math.min(t-1,9)*120-1080*Math.floor(h/9),450+120*s+n),this.Ai.push(o)}this.Es()},i.prototype.Es=function(){var t=this;setTimeout((function(){t.Ai.some((function(t){return 0===t.tn()}))&&t.es.Wi()}),500)},i.prototype.Ct=function(){return[this.action,this.ds,this.ws]},i.prototype.update=function(i,n){var s=this;if(t.prototype.update.call(this,i,n),!(this.delta>1e3)){this.si=Math.sin(3e-4*i),this.Zs=Math.sin(7e-4*i),vt(vt(vt([this.on,this.us,this.Us],this.Ai,!0),[this.fs,this.cs,this.vs],!1),this.Ct(),!0).filter((function(t){return!!t})).forEach((function(t){return t.update(i,n)})),this.os.forEach((function(t){return t.update(i,s.$s)})),this.$s=at({},n);var h=this.us.v.x-this._s.pan.x-400+2*this._s.shift;Math.abs(h)>10&&(this.rs+=Math.sign(h)),this._s.pan.x+=.05*this.rs*this.delta,this.rs*=.9;var r=this.hs-this._s.zoom;if(Math.abs(r)>.01&&(this._s.zoom+=.0075*Math.sign(r)*.05*this.delta),this.os.length>0&&n.It){var o=this.os.find((function(t){return t.bn()}));o&&(this.Ys(),this.ot.S.W(),this.ds.visible=!1,this.ws.visible=!1,this.os.forEach((function(t){return t.Zi(!1)})),o.float(!1),o.move(c(this.us.an(this.us.vn()),this.us.v.x,this.us.v.y),(function(){return s.us.cn(o)})),this.us.Qt(),setTimeout((function(){s.os=s.os.filter((function(t){return t!=o})),s.Os()}),300))}}},i.prototype.dt=function(t){var i,n=this,s=100*Math.floor(this._s.pan.x/100)-500-this._s.shift;t.strokeStyle="#0000ff11",t.lineWidth=45+10*this.ct,t.lineCap="round",t.setLineDash([0,35]);for(var h=0;h<60;h++)t.save(),t.translate(s+100*h-500,0),t.rotate(.25*Math.PI),t.beginPath(),t.moveTo(h,-2e3),t.lineTo(h,5e3),t.stroke(),t.restore();this.xs.forEach((function(i){t.lineWidth=100*i.scale,t.setLineDash([0,80*i.scale]),t.beginPath(),t.strokeStyle="#ffffff22",t.ellipse(i.x,i.y,140*i.scale,30*i.scale,0,0,2*Math.PI),t.stroke(),i.x-=i.speed*n.delta*.03,i.x<n._s.pan.x-1e3&&(i.x=n._s.pan.x+2500+1e3*Math.random())})),t.setLineDash([]),t.strokeStyle="#000",t.lineWidth=7,null===(i=this.Us)||void 0===i||i.dt(t),this.us.dt(t),this.on.dt(t),this.os.forEach((function(i){return i.dt(t)})),t.strokeStyle="#ffffffbb",t.fillStyle="#03fcf477",t.beginPath(),t.moveTo(s+3e3,2e3),t.lineTo(s,2e3),t.lineTo(s,500+5*this.ct);for(h=0;h<120;h++){var r=8*Math.sin(s+50*h+25*this.si)+8*Math.cos(s+25*h+12*this.Zs)+20;t.quadraticCurveTo(s+50*h-25,525-5*this.ct-r,s+50*h,500+7*this.ct-r)}if(t.fill(),t.stroke(),vt(vt([],this.Ai,!0),this.Dt(),!0).forEach((function(i){return i.dt(t)})),this.$s){var o=new DOMPoint(this.$s.x,this.$s.y).matrixTransform(t.getTransform().inverse());this.$s={x:o.x,y:o.y}}t.resetTransform(),vt([this.fs,this.cs,this.vs],this.Ct(),!0).forEach((function(i){return i.dt(t)}))},i}(A),yt=800,wt=400,mt=document.createElement("canvas"),Mt=mt.getContext("2d"),bt={x:0,y:0},Tt=new o(!1);Tt.k(),Tt.play();var pt=new x(Tt,mt);pt.St=new dt(pt),mt.id="game",mt.width=yt,mt.height=wt,document.body.appendChild(mt);var Ot=1,_t=0,xt=0,jt=function(){Ot=Math.min(window.innerWidth/yt,window.innerHeight/wt),mt.style.transformOrigin="top left",_t=.5*(window.innerWidth-yt*Ot),xt=.5*(window.innerHeight-wt*Ot),mt.style.transform="translate(".concat(_t,"px,").concat(xt,"px) scale(").concat(Ot,")")};jt(),window.onresize=jt;var gt=!1;document.onfullscreenchange=function(){return gt=!gt},document.onmousemove=function(t){bt.x=gt?(t.offsetX-_t)/Ot:t.offsetX,bt.y=gt?(t.offsetY-xt)/Ot:t.offsetY},document.onkeydown=function(t){Tt.play(),pt.pressed(t)},document.onmousedown=function(){Tt.play(),bt.It=!0,pt.click(bt)};var At=function(t){requestAnimationFrame(At),Mt.resetTransform(),pt.update(t,bt),pt.dt(Mt)};requestAnimationFrame(At)})();</script></body></html>